create repository boinc
end repository

# matches trunk/boinc and branches/whatever/[boinc/]
# doesn't have slash at beginning or end
declare TRUNK_OR_BRANCHES=(?:trunk/boinc|branches/[^/]+(?:/boinc)?|workspaces/didactylos)

# skip compiled binaries
match /${TRUNK_OR_BRANCHES}/(openssl|curl|icu|zlib)/(mswin|win32)/
end match
match /${TRUNK_OR_BRANCHES}/coprocs/(CUDA|NVIDIA)/(mswin|linux|posix)/
end match
# match /trunk/boinc/clientscr/progress/win/
# end match
# match /trunk/boinc/clientscr/progress/boincscr.exe
# end match
#match /trunk/boinc/samples/example_app/bin/
#end match
match /trunk/boinc/samples/wrapper/(bin|i386|ppc|x86_64)/
end match
match /trunk/boinc/samples/redist/
end match

match /trunk/boinc/win_build/boinc_installshield.zip
end match
match /trunk/boinc/bonc.tar.gz
end match
match /trunk/boinc/client/win/dbghelp.dll
end match


# trunk branch
match /trunk/boinc/
    repository boinc
    branch master
    min revision 10
end match

# sample apps, moved to trunk later
match /trunk/boinc_samples/
    repository boinc
    branch samples
end match

# Charlie's workspace for AsyncRPC work
match /workspaces/charlief/
    repository boinc
    branch charlief/asyncrpc
end match

# Didactylos's workspace
match /workspaces/didactylos/
    repository boinc
    branch didactylos/WiX
    min revision 12406
    max revision 14084 # wiped in 14085
end match
match /workspaces/didactylos/
    repository boinc
    branch didactylos/manager
    min revision 14087
end match

# These were created by copying trunk/ to branches/boinc_core_release_x_y,
# so they have a 'boinc' subdirectory. Thus I need an extra recurse rule
# to get the contents.
match /branches/boinc_core_release_5_(2|4|6|8|8a)/$
    action recurse
end match
match /branches/boinc_core_release_5_(2|4|6|8|8a)/boinc/
    repository boinc
    branch core_5.\1
end match

# 5.10 and later were created by copying trunk/boinc to branches/boinc_core_release_x_y,
# so there's no boinc subdir here.
match /branches/boinc_core_release_5_(10)/
    repository boinc
    branch core_5.\1
end match
match /branches/boinc_core_release_6_(2|4|6|6a|10|12)/
    repository boinc
    branch core_6.\1
end match
match /branches/boinc_core_release_7_(0|0a)/
    repository boinc
    branch core_7.\1
end match

# 6.8 was created in r18219, deleted in r18416 and recreated in r18417
# so it needs special handling.
match /branches/boinc_core_release_6_8/
    repository boinc
    branch core_6.8_old
    min revision 18219
    max revision 18415 # deleted in 18416
end match
match /branches/boinc_core_release_6_8/
    repository boinc
    branch core_6.8
    min revision 18417
end match

# Like branches, tags in CVS contained a 'boinc' subdirectory.
# After the SVN move, the tags were created from 'boinc' directly
# and don't have such a subdir.
# 12367 is the last revision coming from CVS.
match /tags/([^/]+)/$
    action recurse
    max revision 12367
end match
match /tags/boinc_core_release_(\d+)_(\d+)/boinc/
    repository boinc
    branch refs/tags/v\1.\2
    annotated true
    infer merges true
    max revision 12367
end match
match /tags/boinc_core_release_(\d+)_(\d+)_(\d+)/boinc/
    repository boinc
    branch refs/tags/v\1.\2.\3
    annotated true
    infer merges true
    max revision 12367
end match

# post-CVS
match /tags/boinc_core_release_(\d+)_(\d+)_(\d+)/
    repository boinc
    branch refs/tags/v\1.\2.\3
    annotated true
    infer merges true
    min revision 12368
end match

match /
end match
